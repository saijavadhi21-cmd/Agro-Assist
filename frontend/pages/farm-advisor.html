<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farm Advisor | KrishiMitra</title>
    <link rel="icon" type="image/png" href="../assets/logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/explore.css">
</head>

<body>
<div class="container">

<!-- HEADER -->
<header>
    <nav class="header__nav w-120">
        <div class="header__logo">
            <a href="../index.html">
                <img src="../assets/logo.png" alt="KrishiMitra Logo">
            </a>
        </div>
        <ul class="header__menu">
            <li class="menu__item">
                <a href="../index.html" class="menu__link">Home</a>
            </li>
        </ul>
    </nav>
</header>

<!-- MAIN CONTENT -->
<main class="farm-advisor w-120">
    <section class="advisor-header">
        <h1>üå± Farm Advisor</h1>
        <p>Get personalized crop recommendations based on your soil parameters</p>
    </section>

    <!-- LOCATION SECTION -->
    <section class="form-section location-section">
        <h2>üìç Location & Geolocation</h2>
        <div class="location-input">
            <input type="text" id="locationQuery" placeholder="Enter location (city/village)" class="input">
            <button id="searchLocationBtn" class="btn-secondary">Search</button>
            <button id="detectLocationBtn" class="btn-secondary">üìç Detect</button>
            <div id="locationSuggestions" class="suggestions-box"></div>
        </div>
        <div id="coordsDisplay" style="display: none;">
            <p id="coordText" style="font-size: 14px; color: var(--text-muted); margin-top: 8px;"></p>
            <input type="hidden" id="lat">
            <input type="hidden" id="lon">
        </div>
    </section>

    <!-- ERROR DISPLAY -->
    <div id="formError" class="error-message" style="display: none;"></div>

    <!-- FORM SECTION -->
    <section class="form-section">
        <h2>üî¨ Soil Parameters</h2>
        <form id="farmForm">
            <div class="form-grid">
                <div class="form-group">
                    <label for="nitrogen">Nitrogen (N) - mg/kg</label>
                    <input type="number" id="nitrogen" placeholder="e.g., 45" class="input">
                </div>
                <div class="form-group">
                    <label for="phosphorus">Phosphorus (P) - mg/kg</label>
                    <input type="number" id="phosphorus" placeholder="e.g., 35" class="input">
                </div>
                <div class="form-group">
                    <label for="potassium">Potassium (K) - mg/kg</label>
                    <input type="number" id="potassium" placeholder="e.g., 150" class="input">
                </div>
                <div class="form-group">
                    <label for="ph">Soil pH</label>
                    <input type="number" id="ph" step="0.1" placeholder="e.g., 7.0" class="input">
                </div>
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label for="area">Farm Area (acres)</label>
                    <input type="number" id="area" step="0.1" placeholder="e.g., 2.5" class="input">
                </div>
                <div class="form-group">
                    <label for="soilType">Soil Type</label>
                    <select id="soilType" class="input">
                        <option value="any">Any</option>
                        <option value="loamy">Loamy</option>
                        <option value="clay">Clay</option>
                        <option value="sandy loam">Sandy Loam</option>
                        <option value="black cotton">Black Cotton</option>
                        <option value="clay loam">Clay Loam</option>
                    </select>
                </div>
            </div>

            <!-- QUICK INPUT -->
            <div class="form-group">
                <label for="quickInput">Or Enter Quick Text (optional)</label>
                <textarea id="quickInput"
                    placeholder="e.g., 'N 45 P 35 K 150 pH 7.0 area 2 acres loamy soil'"
                    class="input textarea"></textarea>
                <small style="color: var(--text-muted);">Recognized keywords: n, p, k, ph, area, soil type, temperature, rainfall</small>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn__submit">Analyze & Get Recommendations</button>
                <button type="button" id="resetBtn" class="btn btn__secondary">Reset</button>
            </div>
        </form>
    </section>

    <!-- LOADING OVERLAY -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p id="loadingText">Analyzing...</p>
        </div>
    </div>

    <!-- RESULTS SECTION -->
    <section id="results" class="results" style="display: none;">
        <!-- Soil Health Report -->
        <div class="result-card">
            <h3>üìä Soil Health Analysis</h3>
            <div id="soilReport"></div>
        </div>

        <!-- Crop Recommendations -->
        <div class="result-card">
            <h3>üåæ Recommended Crops</h3>
            <div id="cropList" class="crop-list"></div>
        </div>

        <!-- Crop Selector -->
        <div id="cropSelectorBar" class="crop-selector-bar"></div>

        <!-- Budget Report -->
        <div class="result-card">
            <h3>üí∞ Budget & Investment Report</h3>
            <div id="budgetReport"></div>
        </div>
    </section>
</main>

<!-- FOOTER -->
<footer class="footer">
    <p>&copy; 2025 KrishiMitra. Smart Agriculture for Farmers.</p>
</footer>

</div>

<!-- Scripts in order -->
<script src="../js/config.js"></script>
<script src="../js/app.js"></script>
</body>

</html>
